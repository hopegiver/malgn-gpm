<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>성과운영 시스템</title>
    <meta name="description" content="목표 중심의 성과 관리 및 개인 성장 플랫폼">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/base.css">
</head>
<body>
    <!-- 앱 컨테이너 -->
    <div id="app"></div>

    <!-- Bootstrap 5 JS Bundle (Popper 포함) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <!-- Chart.js for charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- ViewLogic Router -->
    <script src="https://cdn.jsdelivr.net/npm/viewlogic@latest/dist/viewlogic-router.min.js"></script>

    <script>
        // ViewLogic Router 초기화
        const router = new ViewLogicRouter({
            basePath: '/',
            srcPath: '/src',
            mode: 'hash',
            defaultRoute: 'login',
            useAuth: true,
            authCheck: () => {
                const user = localStorage.getItem('user');
                return !!user;
            },
            authRedirect: '/login'
        });

        // 전역 설정
        window.APP_NAME = '성과운영 시스템';
        window.APP_VERSION = '1.0.0';

        // 역할 정의
        window.ROLES = {
            EMPLOYEE: 'EMPLOYEE',
            TEAM_LEADER: 'TEAM_LEADER',
            DEPT_HEAD: 'DEPT_HEAD',
            EXECUTIVE: 'EXECUTIVE',
            CEO: 'CEO',
            HR: 'HR',
            STRATEGY: 'STRATEGY'
        };

        // 현재 사용자 정보 가져오기
        window.getCurrentUser = () => {
            const userStr = localStorage.getItem('user');
            return userStr ? JSON.parse(userStr) : null;
        };

        // 사용자 역할 확인
        window.hasRole = (role) => {
            const user = window.getCurrentUser();
            return user && user.roles && user.roles.includes(role);
        };

        // 관리자 역할 확인 (팀장 이상)
        window.isManager = () => {
            return window.hasRole(window.ROLES.TEAM_LEADER) ||
                   window.hasRole(window.ROLES.DEPT_HEAD) ||
                   window.hasRole(window.ROLES.EXECUTIVE) ||
                   window.hasRole(window.ROLES.CEO);
        };

        // 임원 역할 확인
        window.isExecutive = () => {
            return window.hasRole(window.ROLES.EXECUTIVE) ||
                   window.hasRole(window.ROLES.CEO);
        };
    </script>
</body>
</html>

