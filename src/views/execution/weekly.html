<div>
    <!-- Page Header -->
    <div class="page-header">
        <h1 class="page-title">이번 주</h1>
        <p class="page-subtitle">{{ currentWeekText }} 주간 계획 및 실행 현황</p>
    </div>

    <!-- Weekly Stats -->
    <div class="row g-3 mb-4">
        <div class="col-12 col-md-3">
            <div class="stat-card rounded-3 p-4">
                <div class="text-secondary fw-medium mb-2">총 업무</div>
                <div class="fw-bold" style="font-size: 2rem;">{{ weeklyStats.total }}</div>
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="stat-card rounded-3 p-4">
                <div class="text-secondary fw-medium mb-2">완료</div>
                <div class="fw-bold text-success" style="font-size: 2rem;">{{ weeklyStats.completed }}</div>
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="stat-card rounded-3 p-4">
                <div class="text-secondary fw-medium mb-2">진행 중</div>
                <div class="fw-bold text-primary" style="font-size: 2rem;">{{ weeklyStats.inProgress }}</div>
            </div>
        </div>
        <div class="col-12 col-md-3">
            <div class="stat-card rounded-3 p-4">
                <div class="text-secondary fw-medium mb-2">완료율</div>
                <div class="fw-bold" style="font-size: 2rem;">{{ weeklyStats.completionRate }}%</div>
            </div>
        </div>
    </div>

    <!-- Week Navigation -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <button class="btn btn-outline-secondary" @click="previousWeek">
            <i class="bi bi-chevron-left"></i> 이전 주
        </button>
        <button class="btn btn-primary" @click="goToCurrentWeek">
            <i class="bi bi-calendar-week"></i> 이번 주
        </button>
        <button class="btn btn-outline-secondary" @click="nextWeek">
            다음 주 <i class="bi bi-chevron-right"></i>
        </button>
    </div>

    <!-- Daily Tasks by Day -->
    <div class="row g-4">
        <div v-for="day in weekDays" :key="day.date" class="col-12 col-md-6 col-xl-4">
            <div class="card border-0 shadow-sm rounded-3" :class="{ 'border-primary border-2': day.isToday }">
                <div class="card-body p-3">
                    <!-- Day Header -->
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <div>
                            <h6 class="fw-bold mb-1">
                                {{ day.dayName }}
                                <span v-if="day.isToday" class="badge bg-primary ms-2">오늘</span>
                            </h6>
                            <small class="text-secondary">{{ day.dateText }}</small>
                        </div>
                        <div class="text-end">
                            <small class="text-secondary">{{ day.completedCount }}/{{ day.totalCount }}</small>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progress mb-3" style="height: 6px;">
                        <div class="progress-bar" :class="getProgressBarClass(day.completionRate)"
                             :style="{ width: day.completionRate + '%' }"></div>
                    </div>

                    <!-- Task List -->
                    <div v-if="day.tasks.length > 0">
                        <div v-for="task in day.tasks" :key="task.id" class="d-flex align-items-start gap-2 mb-2 p-2 rounded"
                             :class="{ 'bg-light': task.completed }">
                            <input type="checkbox" class="form-check-input mt-1" :checked="task.completed"
                                   @change="toggleTask(day.date, task.id)">
                            <div class="flex-grow-1">
                                <div class="d-flex align-items-center gap-2 mb-1">
                                    <span :class="{ 'text-decoration-line-through text-secondary': task.completed }"
                                          style="font-size: 0.875rem;">{{ task.title }}</span>
                                    <span v-if="task.priority === 'high'" class="badge bg-danger" style="font-size: 0.65rem;">긴급</span>
                                </div>
                                <div v-if="task.goalTitle" class="text-secondary" style="font-size: 0.75rem;">
                                    <i class="bi bi-bullseye"></i> {{ task.goalTitle }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div v-else class="text-center py-3 text-secondary" style="font-size: 0.875rem;">
                        등록된 업무가 없습니다
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Weekly Summary -->
    <div class="row g-4 mt-2">
        <div class="col-12 col-md-6">
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-3">
                        <i class="bi bi-bar-chart text-primary"></i> 우선순위별 업무
                    </h5>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="text-danger">
                            <i class="bi bi-exclamation-circle-fill"></i> 긴급
                        </span>
                        <span class="fw-bold">{{ priorityStats.high }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="text-warning">
                            <i class="bi bi-circle-fill"></i> 보통
                        </span>
                        <span class="fw-bold">{{ priorityStats.medium }}</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span class="text-secondary">
                            <i class="bi bi-circle"></i> 낮음
                        </span>
                        <span class="fw-bold">{{ priorityStats.low }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6">
            <div class="card border-0 shadow-sm rounded-3">
                <div class="card-body p-4">
                    <h5 class="fw-bold mb-3">
                        <i class="bi bi-clock text-success"></i> 시간 투입
                    </h5>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>예상 시간</span>
                        <span class="fw-bold">{{ timeStats.estimated }}시간</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span>실제 시간</span>
                        <span class="fw-bold">{{ timeStats.actual }}시간</span>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <span>효율성</span>
                        <span class="fw-bold" :class="timeStats.efficiency >= 100 ? 'text-success' : 'text-warning'">
                            {{ timeStats.efficiency }}%
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
